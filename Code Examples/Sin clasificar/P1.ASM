DATOS SEGMENT
 TITULO1   DB "                   PROGRAMA DE CONVERSION H/D ",0AH,0DH,"$"
 TITULO2   DB "                   -------------------------- ",0AH,0DH,"$"
 TITULO3   DB 0AH,0DH,"INGRESE NOMBRE DE ESCUELA:$"
 TITULO4   DB 0AH,0DH,"INGRESE NOMBRE DE CURSO:$"
 PETICION  DB 0AH,0DH,0AH,0DH,0AH,0DH,"INGRESE UN NUMERO HEXADECIMAL:$"
 RESPUESTA DB 0AH,0DH,"EL NUMERO RESULTANTE DE LA CONVERSION ES:$"
 PREGUNTA  DB 0AH,0DH,"CONTINUA INGRESANDO VALORES? (S/N) $"
 MAL       DB 0AH,0DH,"CARACTER NO VALIDO",0AH,0DH,"$"
 NUM       DB "      $"
 NOMESC    DB "                        $"
 NOMCUR    DB "                        $"
DATOS ENDS

CODIGO SEGMENT
 ASSUME CS:CODIGO, DS:DATOS

INICIO:
	MOV AX,DATOS
	MOV DS,AX
	MOV AX,03H
	INT 10H
	MOV AH,09H
	MOV DX,OFFSET TITULO1
	INT 21H
	MOV DX,OFFSET TITULO2
	INT 21H
	MOV DX,OFFSET TITULO3
	INT 21H
	MOV SI,01
	MOV AH,01H
LEER1:
	INT 21H
	MOV NOMESC[SI],AL
	CMP SI,22
	JE SIG
	INC SI
	JMP LEER1
SIG:
	MOV DX, OFFSET TITULO4
	MOV AH,09H
	INT 21H
	MOV SI,01
	MOV AH,01H
LEER2:  
	INT 21H
	MOV NOMCUR[SI],AL
	CMP SI,22
	JE PEDIDO
	INC SI
	JMP LEER2
PEDIDO:
	MOV DX,OFFSET PETICION
	MOV AH,09H
	INT 21H
	MOV SI,01
	MOV AH,01H
LEE_DIG:
	INT 21H
	CMP AL,30H
	JB ERROR1
	CMP AL,39H
	JBE NUMERO1
	CMP AL,40H
	JE ERROR1
	CMP AL,46H
	JA ERROR1
	SUB AL,37H      
	JMP CONTINUA1
ERROR1:
	MOV AH,09H
	MOV DX,OFFSET MAL
	INT 21H
	MOV DX,OFFSET PREGUNTA
	INT 21H
	MOV AH,01H
	INT 21H
	CMP AL,"S"
	JE PEDIDO
	JMP FIN
NUMERO1:
	SUB AL,30H
CONTINUA1:
	MOV BH,AL
	MOV AH,01H
	INT 21H
	CMP AL,0DH
	JE UNDIGIT
	CMP AL,30H
	JB ERROR1
	CMP AL,39H
	JBE NUMERO2
	CMP AL,40H
	JE ERROR1
	CMP AL,46H
	JA ERROR1
	SUB AL,37H      
	JMP CONTINUA2
UNDIGIT:
	MOV DL,BH
	MOV BH,00
	JMP CONVER  
NUMERO2:
	SUB AL,30H
CONTINUA2:
	MOV CL,04
	SHL BH,CL
	ADD BH,AL
	INT 21H
	CMP AL,0DH
	JE DOSDIGIT
	CMP AL,30H
	JB ERROR1
	CMP AL,39H
	JBE NUMERO3
	CMP AL,40H
	JE ERROR1
	CMP AL,46H
	JA ERROR1
	SUB AL,37H      
	JMP CONTINUA3
DOSDIGIT:
	MOV DL,BH
	MOV BH,00
	JMP CONVER
ER:
	JMP ERROR1
NUMERO3:
	SUB AL,30H
CONTINUA3:
	MOV DL,AL		
	INT 21H	
	CMP AL,0DH
	JE TRESDIGIT
	CMP AL,40H
	JE ERROR1	
	CMP AL,30H
	JB ERROR1
	CMP AL,39H
	JBE NUMERO4
	CMP AL,46H
	JA ER
	SUB AL,37H      
	JMP CONTINUA4
TRESDIGIT:
	SHL DL,CL
	MOV BL,DL
	SHR BX,CL
	MOV DL,BL	
	JMP CONVER		
NUMERO4:
	SUB AL,30H
CONTINUA4:	
	SHL DL,CL
	ADD DL,AL
CONVER:
	MOV BL,00
	MOV DH,00
	ADD BX,DX
	MOV AX,BX
	XOR CX,CX
	MOV CX,0AH
	LEA SI, NUM+4
BUCLE:
	CMP AX,CX
	JB MENOR
	XOR DX,DX
	DIV CX
	ADD DL,30H
	MOV BYTE PTR[SI],DL
	DEC SI
	JMP BUCLE
MENOR:
	ADD AL,30H
	MOV BYTE PTR[SI], AL
	MOV BYTE PTR[SI+5], "$"
	MOV AH,09H      
	MOV DX, OFFSET RESPUESTA
	INT 21H
	MOV DX, OFFSET NUM      
	INT 21H
TERMINA:
	MOV DX,OFFSET PREGUNTA
	MOV AH,09H
	INT 21H
	MOV AH,01H 
	INT 21H
	CMP AL,"S"
	JE  INI1
	CMP AL,"N"
	JE FIN
	JMP TERMINA
INI1:
	MOV NUM[0],00
	MOV NUM[1],00
	MOV NUM[2],00
	MOV NUM[3],00
	MOV NUM[4],00
	MOV NUM[5],00   
	MOV AX,03H
	INT 10H
	MOV AH,09H
	MOV DX,OFFSET TITULO1
	INT 21H
	MOV DX,OFFSET TITULO2
	INT 21H
	MOV DX,OFFSET TITULO3
	INT 21H
	MOV DX,OFFSET NOMESC
	INT 21H
	MOV DX,OFFSET TITULO4
	INT 21H
	MOV DX,OFFSET NOMCUR
	INT 21H 
	JMP PEDIDO
FIN:
	MOV AH,4CH
	INT 21H
CODIGO ENDS
END INICIO
