;Programa realizado por Kalun Lau (25052004)
;Tocache MMS 2004

DATOS SEGMENT
	TITULO DB "EL AUTO FANTASTICO: "
	REGIS  DB ?
	IND    DB ?

DATOS ENDS

CODIGO SEGMENT
  ASSUME CS:CODIGO, DS:DATOS

;----------------------------------------------------------------------------------------------------------------------------------
INICIO:
	MOV AX, DATOS
	MOV ES, AX		;APUNTA AL SEGMENTO DE DATOS

	CALL MARCO

	MOV AL, 1
	MOV REGIS, AL

OTRO0:	CALL DISP
	CALL RETARDO
	CMP IND, 1
	JE SHIZQ
	JNE SHDER

SHIZQ:	
	PUSH CX
	MOV CL, 1
	SHR REGIS, CL
	POP CX
	JMP SIGUE

SHDER:	
	PUSH CX
	MOV CL, 1
	SHL REGIS, CL
	POP CX
	JMP SIGUE

SIGUE:	CMP REGIS, 1
	JE OTRO1
	CMP REGIS, 128
	JE OTRO2
	JMP OTRO0	

OTRO1:
	PUSH AX
	MOV AL, 1
	MOV IND, AL
	POP AX
	JMP OTRO0

OTRO2:
	PUSH AX
	MOV AL, 0
	MOV IND, AL
	POP AX
	JMP OTRO0

MARCO:
	LEA BP, TITULO
	MOV AH, 13H		;SERVICIO DE IMPRESION DE CADENA
	MOV AL, 1		;MODO DE ESCRITURA
	MOV BH, 0		;NUMERO DE PAGINA
	MOV BL, 71H		;ATRIBUTO
	MOV CX, 20		;NUMERO DE CARACTERES
	MOV DH, 0DH		;FILA
	MOV DL, 05H		;COLUMNA
	INT 10H			;EJECUCION DE LA INT DE VIDEO DE BIOS

DISP:
	PUSH DX
	MOV DL, REGIS
	ADD DL, 30H
	INT 21H
	MOV DL, 13
	INT 21H
	POP DX
	RET

RETARDO:
	PUSH DX
	PUSH CX
	PUSH BX
	MOV DX, 1000
P1:	MOV CX, 1000
P2:	MOV BX, 100
P3:	DEC BX
	JNZ P3
	DEC CX
	JNZ P2
	DEC DX
	JNZ P1
	POP BX
	POP CX
	POP DX
	RET

FIN:
	MOV AH, 4CH
	INT 21H

CODIGO ENDS
END INICIO

